{"version":3,"sources":["components/MapPainel/styles.js","components/MapPainel/index.js"],"names":["GraphSection","styled","section","FlexContainer","div","MapPainel","useState","resultadoMunicipio","setResultadoMunicipio","resultadoUF","setResultadoUF","geometryUF","setGeometryUF","mappingUFMaisVotado","setMappingUFMaisVotado","mappingUFVotosBolsonaro","setMappingUFVotosBolsonaro","mappingUFVotosHaddad","setMappingUFVotosHaddad","layerName","setLayerName","auxResultadoMunicipio","setAuxResultadoMunicipio","scaleBolsonaro","d3","domain","range","scaleHaddad","bolsonaroColor","haddadColor","nomeToSigla","Acre","Alagoas","Amapá","Amazonas","Bahia","Ceará","Goiás","Maranhão","Pará","Paraíba","Paraná","Pernambuco","Piauí","Rondônia","Roraima","Sergipe","Tocantins","highlightFeature","e","layer","target","overState","feature","properties","name","allMunicipios_fromState","forEach","d","uf","toUpperCase","push","nome","totalVotos","percentHaddad","percentBolsonaro","localDim","crossfilter","dimension","initialData","top","i","index","municipioDimension","municipioVotosHaddad","group","reduceSum","municipioVotosBolsonaro","municipioScale","dc","gap","x","xUnits","ordinal","stack","margins","right","bottom","left","elasticY","renderHorizontalGridLines","on","chart","selectAll","style","setStyle","weight","color","dashArray","fillOpacity","resetHighlight","useEffect","then","data","numeroCandidatoMaisVotado","length","listUFs","listMunicipios","mappingUF_MaisVotado","Map","nameCorrected","normalize","replace","set","mappingUF_VotosBolsonaro","mappingUF_VotosHaddad","ufDimension","votosBolsonaroCount","votosHaddadCount","ufScale","aux_resultadoMunicipio","tmp_facts","numeroVotosDimension","className","MapContainer","center","zoom","zoomControl","minZoom","maxZoom","GeoJSON","geo","features","sigla","get","opacity","fillColor","onEachFeature","mouseover","mouseout","TileLayer","url","attribution","id"],"mappings":"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","file":"static/js/14.61556b64.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const GraphSection = styled.section`\n  position: relative;\n  padding: 10rem 0 8rem;\n  @media only screen and (max-width: 768px) {\n    padding: 4rem 0 4rem;\n  }\n`;\n\nexport const FlexContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .map-container.is-locked:after {\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n\n    content: '';\n    display: block;\n  }\n\n  @media only screen and (max-width: 768px) {\n    display: block;\n  }\n\n  .leaflet-container {\n    width: 700px;\n    height: 700px;\n\n    @media only screen and (max-width: 768px) {\n      width: 350px;\n      height: 350px;\n    }\n  }\n\n  div {\n    flex: 1;\n    @media only screen and (max-width: 768px) {\n      flex: 0;\n    }\n  }\n\n  .right {\n    padding-left: 3%;\n  }\n\n  .left {\n    @media only screen and (max-width: 768px) {\n      padding-left: 0%;\n    }\n  }\n`;\n","import React, { useEffect, useState } from 'react';\nimport * as d3 from 'd3';\nimport crossfilter from 'crossfilter2';\nimport L from 'leaflet';\nimport { MapContainer, TileLayer, GeoJSON } from 'react-leaflet';\nimport * as dc from 'dc';\nimport { GraphSection, FlexContainer } from './styles';\n\nimport geo from '../../assets/brazil_geo.json';\n\nfunction MapPainel() {\n  const [resultadoMunicipio, setResultadoMunicipio] = useState([]);\n  const [resultadoUF, setResultadoUF] = useState([]);\n  const [geometryUF, setGeometryUF] = useState([]);\n\n  const [mappingUFMaisVotado, setMappingUFMaisVotado] = useState(false);\n  const [mappingUFVotosBolsonaro, setMappingUFVotosBolsonaro] = useState(false);\n  const [mappingUFVotosHaddad, setMappingUFVotosHaddad] = useState(false);\n\n  const [layerName, setLayerName] = useState('');\n  const [auxResultadoMunicipio, setAuxResultadoMunicipio] = useState(false);\n\n  const scaleBolsonaro = d3\n    .scaleQuantize()\n    .domain([0, 1])\n    .range(d3.schemeBlues[9]);\n\n  const scaleHaddad = d3.scaleQuantize().domain([0, 1]).range(d3.schemeReds[9]);\n\n  const bolsonaroColor = '#4292c6';\n  const haddadColor = '#ef3b2c';\n\n  const nomeToSigla = {\n    Acre: 'AC',\n    Alagoas: 'AL',\n    Amapá: 'AP',\n    Amazonas: 'AM',\n    Bahia: 'BA',\n    Ceará: 'CE',\n    'Distrito Federal': 'DF',\n    'Espírito Santo': 'ES',\n    Goiás: 'GO',\n    Maranhão: 'MA',\n    'Mato Grosso': 'MT',\n    'Mato Grosso do Sul': 'MS',\n    'Minas Gerais': 'MG',\n    Pará: 'PA',\n    Paraíba: 'PB',\n    Paraná: 'PR',\n    Pernambuco: 'PE',\n    Piauí: 'PI',\n    'Rio de Janeiro': 'RJ',\n    'Rio Grande do Norte': 'RN',\n    'Rio Grande do Sul': 'RS',\n    Rondônia: 'RO',\n    Roraima: 'RR',\n    'Santa Catarina': 'SC',\n    'São Paulo': 'SP',\n    Sergipe: 'SE',\n    Tocantins: 'TO',\n  };\n\n  useEffect(() => {\n    d3.csv('/twitter-polarization/data/Eleicoes2018SegundoTurno.csv').then(\n      (data) => {\n        data.forEach((d) => {\n          d.totalVotos = +d.totalVotos;\n          d.percentHaddad = +d.percentHaddad;\n          d.percentBolsonaro = +d.percentBolsonaro;\n          d.numeroCandidatoMaisVotado = +d.numeroCandidatoMaisVotado;\n        });\n\n        setResultadoMunicipio(data);\n      },\n    );\n\n    d3.csv('/twitter-polarization/data/ResultadoUFEleicoes2018.csv').then(\n      (data) => {\n        data.forEach(function (d) {\n          d.percentHaddad = +d.percentHaddad;\n          d.percentBolsonaro = +d.percentBolsonaro;\n          d.numeroCandidatoMaisVotado = +d.numeroCandidatoMaisVotado;\n        });\n\n        setResultadoUF(data);\n      },\n    );\n\n    d3.json('/twitter-polarization/data/brazil_geo.json').then((data) => {\n      setGeometryUF(data);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (\n      resultadoMunicipio.length === 5570 &&\n      resultadoUF.length === 28 &&\n      geometryUF\n    ) {\n      let listUFs = [];\n      resultadoUF.forEach(function (d) {\n        listUFs.push(d['uf']);\n      });\n\n      let listMunicipios = [];\n      resultadoMunicipio.forEach(function (d) {\n        listMunicipios.push(d['name']);\n      });\n\n      // Mappings for constructing the election map\n      const mappingUF_MaisVotado = new Map();\n      resultadoUF.forEach(function (d) {\n        let nameCorrected = d.uf\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .toUpperCase();\n        mappingUF_MaisVotado.set(nameCorrected, +d.numeroCandidatoMaisVotado);\n      });\n\n      setMappingUFMaisVotado(mappingUF_MaisVotado);\n\n      const mappingUF_VotosBolsonaro = new Map();\n      resultadoUF.forEach(function (d) {\n        let nameCorrected = d.uf\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .toUpperCase();\n        mappingUF_VotosBolsonaro.set(nameCorrected, +d.percentBolsonaro);\n      });\n\n      setMappingUFVotosBolsonaro(mappingUF_VotosBolsonaro);\n\n      const mappingUF_VotosHaddad = new Map();\n      resultadoUF.forEach(function (d) {\n        let nameCorrected = d.uf\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .toUpperCase();\n        mappingUF_VotosHaddad.set(nameCorrected, +d.percentHaddad);\n      });\n\n      setMappingUFVotosHaddad(mappingUF_VotosHaddad);\n\n      const facts = crossfilter(resultadoUF);\n      const ufDimension = facts.dimension((d) => d['uf']);\n      const votosBolsonaroCount = ufDimension.group().reduceSum(function (d) {\n        return d['percentBolsonaro'];\n      });\n\n      const votosHaddadCount = ufDimension.group().reduceSum(function (d) {\n        return d['percentHaddad'];\n      });\n      const ufScale = d3.scaleOrdinal().domain(listUFs);\n      const maisVotadoScale = d3\n        .scaleOrdinal()\n        .domain([13, 17])\n        .range([haddadColor, bolsonaroColor]);\n\n      let barchart = new dc.BarChart('#bar1');\n      barchart\n        .dimension(ufDimension)\n        .x(ufScale)\n        .xUnits(dc.units.ordinal)\n        .group(votosHaddadCount)\n        .stack(votosBolsonaroCount)\n        .margins({ top: 10, right: 20, bottom: 20, left: 30 })\n        .elasticY(true)\n        .renderHorizontalGridLines(true)\n        .on('pretransition', function (chart) {\n          chart.selectAll('g.stack rect.bar').style('fill', function (d) {\n            if (d.layer == 0) {\n              return haddadColor;\n            } else {\n              return bolsonaroColor;\n            }\n          });\n        });\n\n      const aux_resultadoMunicipio = [];\n      resultadoMunicipio.forEach(function (d, i) {\n        aux_resultadoMunicipio.push({\n          index: i,\n          uf: d.uf,\n          nome: d.uf + ',' + d.nome,\n          totalVotos: d.totalVotos,\n          percentHaddad: d.percentHaddad,\n          percentBolsonaro: d.percentBolsonaro,\n        });\n      });\n\n      setAuxResultadoMunicipio(aux_resultadoMunicipio);\n\n      const tmp_facts = crossfilter(aux_resultadoMunicipio);\n      const allMunicipioDimension = tmp_facts.dimension((d) => d['nome']);\n      const numeroVotosDimension = tmp_facts.dimension((d) => d['totalVotos']);\n\n      let initialData = [];\n      numeroVotosDimension.top(5).forEach(function (d, i) {\n        initialData.push({\n          index: i,\n          nome: d.nome,\n          totalVotos: d.totalVotos,\n          percentHaddad: d.percentHaddad,\n          percentBolsonaro: d.percentBolsonaro,\n        });\n      });\n\n      const facts2 = crossfilter(initialData);\n      const municipioDimension = facts2.dimension((d) => d['nome']);\n      const municipioVotosHaddad = municipioDimension\n        .group()\n        .reduceSum(function (d) {\n          return d.percentHaddad;\n        });\n      const municipioVotosBolsonaro = municipioDimension\n        .group()\n        .reduceSum(function (d) {\n          return d.percentBolsonaro;\n        });\n      const municipioScale = d3.scaleOrdinal().domain(municipioDimension);\n\n      let barchart2 = new dc.BarChart('#bar2');\n      barchart2\n        .gap(50)\n        .dimension(municipioDimension)\n        .x(municipioScale)\n        .xUnits(dc.units.ordinal)\n        .group(municipioVotosHaddad)\n        .stack(municipioVotosBolsonaro)\n        .margins({ top: 10, right: 20, bottom: 20, left: 30 })\n        .elasticY(true)\n        .renderHorizontalGridLines(true)\n        .on('pretransition', function (chart) {\n          chart.selectAll('g.stack rect.bar').style('fill', function (d) {\n            if (d.layer == 0) {\n              return haddadColor;\n            } else {\n              return bolsonaroColor;\n            }\n          });\n        });\n\n      dc.renderAll();\n    }\n  }, [resultadoMunicipio, resultadoUF, geometryUF]);\n\n  function onEachFeature(feature, layer) {\n    layer.on({\n      mouseover: highlightFeature,\n      mouseout: resetHighlight,\n    });\n  }\n\n  function highlightFeature(e) {\n    let layer = e.target;\n    let overState = nomeToSigla[layer.feature.properties.name];\n    setLayerName(layer.feature.properties.name);\n\n    let allMunicipios_fromState = [];\n    auxResultadoMunicipio.forEach(function (d) {\n      if (d.uf.toUpperCase() == overState) {\n        allMunicipios_fromState.push({\n          uf: d.uf.toUpperCase(),\n          nome: d.nome,\n          totalVotos: d.totalVotos,\n          percentHaddad: d.percentHaddad,\n          percentBolsonaro: d.percentBolsonaro,\n        });\n      }\n    });\n\n    const localFacts = crossfilter(allMunicipios_fromState);\n    const localDim = localFacts.dimension((d) => d['totalVotos']);\n\n    let initialData = [];\n    localDim.top(5).forEach(function (d, i) {\n      initialData.push({\n        index: i,\n        nome: d.nome,\n        totalVotos: d.totalVotos,\n        percentHaddad: d.percentHaddad,\n        percentBolsonaro: d.percentBolsonaro,\n      });\n    });\n\n    const facts2 = crossfilter(initialData);\n    const municipioDimension = facts2.dimension((d) => d['nome']);\n    const municipioVotosHaddad = municipioDimension\n      .group()\n      .reduceSum(function (d) {\n        return d.percentHaddad;\n      });\n    const municipioVotosBolsonaro = municipioDimension\n      .group()\n      .reduceSum(function (d) {\n        return d.percentBolsonaro;\n      });\n    const municipioScale = d3.scaleOrdinal().domain(municipioDimension);\n    let barchart2 = new dc.BarChart('#bar2');\n    barchart2\n      .gap(50)\n      .dimension(municipioDimension)\n      .x(municipioScale)\n      .xUnits(dc.units.ordinal)\n      .group(municipioVotosHaddad)\n      .stack(municipioVotosBolsonaro)\n      .margins({ top: 10, right: 20, bottom: 20, left: 30 })\n      .elasticY(true)\n      .renderHorizontalGridLines(true)\n      .on('pretransition', function (chart) {\n        chart.selectAll('g.stack rect.bar').style('fill', function (d) {\n          if (d.layer == 0) {\n            return haddadColor;\n          } else {\n            return bolsonaroColor;\n          }\n        });\n      });\n    dc.renderAll();\n\n    layer.setStyle({\n      weight: 2,\n      color: '#AAA',\n      dashArray: '',\n      fillOpacity: 0.7,\n    });\n  }\n\n  function resetHighlight(e) {\n    var layer = e.target;\n    layer.setStyle({ color: '#fff' });\n  }\n\n  function UnitsBar() {\n    return d3.scaleOrdinal().domain(listUFs);\n  }\n\n  return (\n    <>\n      <GraphSection>\n        <FlexContainer>\n          <div className=\"left\">\n            <MapContainer\n              className=\"markercluster-map\"\n              center={[-14.4107911, -48.9010266]}\n              zoom={4}\n              zoomControl={false}\n              minZoom={4}\n              maxZoom={4}\n            >\n              {mappingUFMaisVotado && (\n                <GeoJSON\n                  data={geo.features}\n                  style={(feature) => {\n                    let color = '#E8E8E8';\n                    let uf = feature.properties.sigla\n                      .normalize('NFD')\n                      .replace(/[\\u0300-\\u036f]/g, '')\n                      .toUpperCase();\n\n                    if (mappingUFMaisVotado.get(uf) == 17)\n                      color = scaleBolsonaro(mappingUFVotosBolsonaro.get(uf));\n                    else if (mappingUFMaisVotado.get(uf) == 13)\n                      color = scaleHaddad(mappingUFVotosHaddad.get(uf));\n                    return {\n                      weight: 1,\n                      opacity: 1,\n                      color: 'white',\n                      dashArray: '3',\n                      fillOpacity: 0.6,\n                      fillColor: color,\n                    };\n                  }}\n                  onEachFeature={onEachFeature}\n                />\n              )}\n              <TileLayer\n                url=\"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png\"\n                attribution='&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>,\n Map tiles by &copy; <a href=\"https://carto.com/attribution\">CARTO</a>'\n                maxZoom={18}\n              />\n            </MapContainer>\n          </div>\n          <div className=\"right\">\n            <div id=\"bar1\">\n              <h2 id=\"barHeader1\">Percentual de votos por Estado</h2>\n            </div>\n            <h2>{layerName}</h2> <div id=\"bar2\"></div>\n          </div>\n        </FlexContainer>\n      </GraphSection>\n    </>\n  );\n}\n\nexport default MapPainel;\n"],"sourceRoot":""}