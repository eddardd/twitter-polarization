{"version":3,"sources":["components/Painel/styles.js","components/Painel/index.js"],"names":["GraphSection","styled","section","Svg","svg","Container","div","Painel","useAxios","response","loading","error","response2","loading2","error2","useState","allRetweets","setAllRetweets","setAllUsers","facts1","setFacts1","ideologyDimension1","setIdeologyDimension1","ideologyCount1","setIdeologyCount1","facts2","setFacts2","ideologyDimension2","setIdeologyDimension2","ideologyCount2","setIdeologyCount2","selectedName","setSelectedName","width","orientationTypeScale","d3","domain","range","id","node","parent","data","name","useEffect","all_retweets","links","all_users","nodes","crossfilter","dimension","d","group","length","root","delimiter","map","Map","forEach","find","has","get","i","lastIndexOf","set","substring","children","push","hierarchy","line","curve","beta","radius","y","angle","x","size","Math","PI","tree","leaves","Orientaçao","imports","depth","height","incoming","outgoing","o","f","bilink","sort","a","b","nameDimension1","nameDimension2","attr","link","append","selectAll","join","text","each","this","on","event","selected","style","path","raise","retweeted_usernames","who_user_retweeted","usernames","u","split","getRetweetedUsers","users_who_retweet","user","getWhoRetweetedUser","filterFunction","indexOf","dc","call","flatMap","leaf","textAlign","href","className","src","preserveAspectRatio","alt","xUnits","ordinal","elasticY","elasticX","margins","top","right","bottom","left","renderHorizontalGridLines","colors","colorAccessor","key","margin"],"mappings":"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","file":"static/js/17.a6fd5426.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const GraphSection = styled.section`\n  position: relative;\n  padding: 10rem 0 8rem;\n  @media only screen and (max-width: 768px) {\n    padding: 4rem 0 4rem;\n  }\n\n  .column {\n    flex: 33.33%;\n    padding: 5px;\n  }\n\n  .row {\n    display: flex;\n  }\n\n  .row img {\n    width: 80%;\n  }\n`;\n\nexport const Svg = styled.svg``;\n\nexport const Container = styled.div`\n  display: flex;\n\n  @media only screen and (max-width: 768px) {\n    display: block;\n  }\n\n  div {\n    flex: 1;\n    @media only screen and (max-width: 768px) {\n      flex: 0;\n    }\n  }\n\n  .right {\n    padding-left: 3rem;\n    padding-top: 9%;\n    @media only screen and (max-width: 768px) {\n      padding-top: 0;\n    }\n  }\n\n  img {\n    border-radius: 50%;\n    height: 48px;\n  }\n\n  .left {\n    @media only screen and (max-width: 768px) {\n      padding-left: 0%;\n\n      svg {\n        width: 100%;\n      }\n    }\n  }\n\n  .userInfo {\n    padding-top: 1rem;\n    display: inline-flex;\n\n    p {\n      padding-top: 1rem;\n      padding-right: 1rem;\n    }\n  }\n`;\n","import React, { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport crossfilter from 'crossfilter2';\nimport useAxios from 'axios-hooks';\nimport * as dc from 'dc';\nimport { ChartContext, BarChart } from 'react-dc-js';\n\nimport { Container, GraphSection, Svg } from './styles';\n\nfunction Painel() {\n  const [{ response, loading, error }, refetch] = useAxios(\n    'https://gist.githubusercontent.com/dhannyell/f4453995758ea516ed637fd00b9da2f4/raw/2feb69a9dc9b3c1c4166c1ed41c2b4b2f6134c0a/hierarchical_graph.json',\n  );\n\n  const [\n    { response: response2, loading: loading2, error2 },\n    refetch2,\n  ] = useAxios(\n    'https://gist.githubusercontent.com/dhannyell/b405174707a39252af5cc8981aec3aee/raw/78945dda256ca9afbbef38c91aeb7a8f2e113035/standard_graph@1.json',\n  );\n\n  const [allRetweets, setAllRetweets] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  const [facts1, setFacts1] = useState([]);\n  const [ideologyDimension1, setIdeologyDimension1] = useState([]);\n  const [ideologyCount1, setIdeologyCount1] = useState([]);\n\n  const [facts2, setFacts2] = useState([]);\n  const [ideologyDimension2, setIdeologyDimension2] = useState([]);\n  const [ideologyCount2, setIdeologyCount2] = useState([]);\n\n  const [selectedName, setSelectedName] = useState('');\n\n  const width = 954;\n  const height = 800;\n  const barplot_width = 300;\n  const barplot_height = 150;\n  const radius = width / 2;\n\n  const orientationTypeScale = d3\n    .scaleOrdinal()\n    .domain(['Esquerda', 'Direita', 'Centro'])\n    .range(['#ef3b2c', '#4292c6', '#8a00e6']);\n\n  function id(node) {\n    return `${node.parent ? id(node.parent) + '.' : ''}${node.data.name}`;\n  }\n\n  function bilink(root) {\n    if (typeof root.leaves() === 'undefined') {\n      root = [\n        {\n          data: { name: 'loading', Orientaçao: 'Centro', imports: [] },\n          depth: 2,\n          height: 0,\n          incoming: [],\n          outgoing: [],\n          parent: [],\n        },\n      ];\n    }\n\n    const map = new Map(root.leaves().map((d) => [id(d), d]));\n    for (const d of root.leaves())\n      (d.incoming = []),\n        (d.outgoing = d.data.imports.map((i) => [d, map.get(i)]));\n    for (const d of root.leaves())\n      for (const o of d.outgoing) o[1].incoming.push(o);\n    return root;\n  }\n\n  function hierarchy(data, delimiter = '.') {\n    let root;\n    const map = new Map();\n    data.forEach(function find(data) {\n      const { name } = data;\n      if (map.has(name)) return map.get(name);\n      const i = name.lastIndexOf(delimiter);\n      map.set(name, data);\n      if (i >= 0) {\n        find({ name: name.substring(0, i), children: [] }).children.push(data);\n        data.name = name.substring(i + 1);\n      } else {\n        root = data;\n      }\n      return data;\n    });\n    return root;\n  }\n\n  useEffect(() => {\n    if (loading2 === false) {\n      const all_retweets = response2.data.links;\n      setAllRetweets(all_retweets);\n\n      const all_users = response2.data.nodes;\n      setAllUsers(all_users);\n\n      let facts1 = crossfilter(all_users);\n      setFacts1(facts1);\n\n      let ideologyDimension1 = facts1.dimension((d) => d['Ideology']);\n      setIdeologyDimension1(ideologyDimension1);\n\n      let nameDimension1 = facts1.dimension((d) => d['username']);\n      //setNameDimension1(nameDimension1);\n      let ideologyCount1 = ideologyDimension1.group();\n      setIdeologyCount1(ideologyCount1);\n\n      let facts2 = crossfilter(all_users);\n      setFacts2(facts2);\n      let ideologyDimension2 = facts2.dimension((d) => d['Ideology']);\n      setIdeologyDimension2(ideologyDimension2);\n      let nameDimension2 = facts2.dimension((d) => d['username']);\n      //setNameDimension2(nameDimension2);\n      let ideologyCount2 = ideologyDimension2.group();\n      setIdeologyCount2(ideologyCount2);\n    }\n  }, [loading2]);\n\n  useEffect(() => {\n    if (allRetweets.length > 0 && loading === false) {\n      const colorin = '#660033';\n      const colorout = '#669900';\n      const colornone = '#ccc';\n\n      const data = hierarchy(response.data);\n\n      const line = d3\n        .lineRadial()\n        .curve(d3.curveBundle.beta(0.85))\n        .radius((d) => d.y)\n        .angle((d) => d.x);\n\n      const tree = d3.cluster().size([2 * Math.PI, radius - 100]);\n\n      const root = tree(\n        bilink(\n          d3\n            .hierarchy(data)\n            .sort(\n              (a, b) =>\n                d3.ascending(a.height, b.height) ||\n                d3.ascending(a.data.name, b.data.name),\n            ),\n        ),\n      );\n\n      let nameDimension1 = facts1.dimension((d) => d['username']);\n      let nameDimension2 = facts2.dimension((d) => d['username']);\n\n      const svg = d3\n        .select('#hierarchical')\n        .attr('viewBox', [-width / 2, -width / 2, width, width]);\n\n      let y = d3.scaleLinear().domain([0, 60]).range([barplot_height, 0]);\n\n      const node = svg\n        .append('g')\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 10)\n        .selectAll('g')\n        .data(root.leaves())\n        .join('g')\n        .attr(\n          'transform',\n          (d) => `rotate(${(d.x * 180) / Math.PI - 90}) translate(${d.y},0)`,\n        )\n        .append('text')\n        .attr('dy', '0.31em')\n        .attr('x', (d) => (d.x < Math.PI ? 6 : -6))\n        .attr('text-anchor', (d) => (d.x < Math.PI ? 'start' : 'end'))\n        .attr('transform', (d) => (d.x >= Math.PI ? 'rotate(180)' : null))\n        .text((d) => d.data.name)\n        .attr('fill', (d) => orientationTypeScale(d.data['Orientação']))\n        .each(function (d) {\n          d.text = this;\n        })\n        .on('click', selection_fn)\n        //.on(\"dblclick\", outed)\n        .call((text) =>\n          text.append('title').text(\n            (d) => `${d.data.name}\n                        Retweeted by ${d.outgoing.length} users\n                        Retweeted ${d.incoming.length} users`,\n          ),\n        );\n\n      const link = svg\n        .append('g')\n        .attr('stroke', colornone)\n        .attr('fill', 'none')\n        .selectAll('path')\n        .data(root.leaves().flatMap((leaf) => leaf.outgoing))\n        .join('path')\n        .style('mix-blend-mode', 'multiply')\n        .attr('d', ([i, o]) => line(i.path(o)))\n        .each(function (d) {\n          d.path = this;\n        });\n\n      dc.renderAll();\n\n      function getRetweetedUsers(who_user_retweeted) {\n        let usernames = [];\n        who_user_retweeted.forEach(function (u) {\n          usernames.push(u.split('.')[2]);\n        });\n\n        return usernames;\n      }\n\n      function getWhoRetweetedUser(user) {\n        let users_who_retweet = [];\n        allRetweets.forEach(function (link) {\n          if (link['target'] == user) {\n            users_who_retweet.push(link['source']);\n          }\n        });\n\n        return users_who_retweet;\n      }\n\n      function selection_fn(d, event) {\n        if (d.data.selected) {\n          d.data.selected = false;\n          link.style('mix-blend-mode', 'multiply');\n          d3.select('hierarchical').attr('font-weight', null);\n          d3.select('hierarchical').attr(\n            'fill',\n            orientationTypeScale(d.data['Ideology']),\n          );\n          d3.selectAll(d.incoming.map((d) => d.path)).attr('stroke', null);\n          d3.selectAll(d.outgoing.map((d) => d.path)).attr('stroke', null);\n          d3.selectAll(d.incoming.map(([d]) => d.text)).attr(\n            'font-weight',\n            null,\n          );\n          d3.selectAll(d.outgoing.map(([, d]) => d.text)).attr(\n            'font-weight',\n            null,\n          );\n        } else {\n          setSelectedName(d.data.name);\n          d.data.selected = true;\n          link.style('mix-blend-mode', null);\n          d3.select('hierarchical').attr('font-weight', 'bold');\n          d3.select('hierarchical').attr('fill', '#000');\n          d3.selectAll(d.incoming.map((d) => d.path))\n            .attr('stroke', colorin)\n            .raise();\n          d3.selectAll(d.outgoing.map((d) => d.path))\n            .attr('stroke', colorout)\n            .raise();\n          d3.selectAll(d.incoming.map(([d]) => d.text)).attr(\n            'font-weight',\n            'bold',\n          );\n          d3.selectAll(d.outgoing.map(([, d]) => d.text)).attr(\n            'font-weight',\n            'bold',\n          );\n        }\n\n        let retweeted_usernames = getRetweetedUsers(d.data.imports);\n        let users_who_retweet = getWhoRetweetedUser(d.data['name']);\n\n        nameDimension1.filterFunction(function (d) {\n          return retweeted_usernames.indexOf(d) > -1;\n        });\n\n        nameDimension2.filterFunction(function (d) {\n          return users_who_retweet.indexOf(d) > -1;\n        });\n        dc.renderAll();\n      }\n    }\n  }, [allRetweets, loading]);\n\n  if (loading || loading2) {\n    return <h1>Loading Data...</h1>;\n  }\n  if (error) return <p>Error!</p>;\n\n  return (\n    <>\n      {allRetweets.length > 100 ? (\n        <>\n          <GraphSection>\n            <h2 style={{ textAlign: 'center' }}>\n              Comportamento de Agentes Políticos nas Redes Sociais\n            </h2>\n            <p>\n              Procuramos fazer uma análise do comportamento que diversos agentes\n              políticos apresentam na rede social Twitter. O foco da nossa\n              visualização está na interação entre usuários. Para visualizar\n              essas interações, nós vamos considerar o ato de retweet como uma\n              conexão entre dois usuários. Portanto, nós agrupamos usuários de\n              mesma ideologia política. Note que a definição da ideologia\n              política dos usuários pesquisados segue a ideologia partidária\n              levantada em <a href=\"#ref\"> [6]</a>, bem como a análise feita por{' '}\n              <a href=\"#ref\"> [7]</a>. Incluímos uma conexão entre\n              personalidades que se reuitaram. Isso nos permite verificar: (i)\n              se os retuites seguem a ideologia política dos agentes políticos,\n              (ii) quais usuários conseguem se comunicar com diferentes\n              ideologias políticas.\n            </p>\n            <h5>Ideologia Política e Retuites</h5>\n            <p>\n              Ao analisarmos os perfis, notamos que usuários à esquerda tendem a\n              retuitar usuários de esquerda, assim como os usuários de direita\n              tendem a retuitar usuários de direita. Exemplos notórios são os\n              perfis do deputado Zeca Dirceu (@zeca_dirceu) e do presidente Jair\n              Bolsonaro (@jairbolsonaro). Enquanto o primeiro só se comunica com\n              usuários de esquerda (portanto, de sua mesma ideologia política),\n              o segundo consegue ainda se comunicar com todo o espectro\n              político, apesar da predominância entre usuários de direita.\n            </p>\n            <div className=\"row\">\n              <div className=\"column\">\n                <img src={'/twitter-polarization/presetation/3.png'} />\n              </div>\n              <div className=\"column\">\n                <img src={'/twitter-polarization/presetation/4.png'} />\n              </div>\n            </div>\n            <p>\n              O mesmo não se verifica para usuários de centro. Por exemplo,\n              veículos de informação tem uma maior comunicabilidade entre todo o\n              espectro político, como pode ser visto abaixo nas conexões do\n              perfil @folha, ou mesmo nomes de centro-direita como o perfil\n              @77_frota. Isso reforça dois pontos-chave: (i) a imparcialidade de\n              veículos de imprensa e de jornalistas, e (ii) o fato de que\n              agentes políticos menos radicais tendem a se comunicar com os dois\n              lados do espectro político.\n            </p>\n            <div className=\"row\">\n              <div className=\"column\">\n                <img src={'/twitter-polarization/presetation/5.png'} />\n              </div>\n              <div className=\"column\">\n                <img src={'/twitter-polarization/presetation/6.png'} />\n              </div>\n            </div>\n            <h5>Visualização Iterativa</h5>\n            <Container>\n              <div className=\"left \">\n                <Svg\n                  id=\"hierarchical\"\n                  preserveAspectRatio=\"xMidYMid meet\"\n                ></Svg>\n              </div>\n              <div className=\"right\">\n                <div className=\"userInfo\">\n                  <p>Ideologia de quem retuitou @{selectedName}</p>\n                  <img\n                    src={`/twitter-polarization/images/${selectedName}.jpg`}\n                    alt={selectedName}\n                  />\n                </div>\n                <div className=\"charts\">\n                  <BarChart\n                    dimension={ideologyDimension1}\n                    group={ideologyCount1}\n                    x={orientationTypeScale}\n                    xUnits={dc.units.ordinal}\n                    elasticY={true}\n                    elasticX={false}\n                    margins={{ top: 10, right: 20, bottom: 20, left: 30 }}\n                    renderHorizontalGridLines={true}\n                    colors={orientationTypeScale}\n                    colorAccessor={(d) => d.key}\n                  />\n                  <div className=\"userInfo\">\n                    <p>Ideologia dos retuitados por @{selectedName}</p>\n                  </div>\n                  <BarChart\n                    dimension={ideologyDimension2}\n                    group={ideologyCount2}\n                    x={orientationTypeScale}\n                    xUnits={dc.units.ordinal}\n                    elasticY={true}\n                    margin={{ top: 10, right: 20, bottom: 20, left: 30 }}\n                    renderHorizontalGridLines={true}\n                    colors={orientationTypeScale}\n                    colorAccessor={(d) => d.key}\n                  />\n                </div>\n              </div>\n            </Container>\n          </GraphSection>\n        </>\n      ) : (\n        <h1>Loading Data...</h1>\n      )}\n    </>\n  );\n}\n\nexport default Painel;\n"],"sourceRoot":""}