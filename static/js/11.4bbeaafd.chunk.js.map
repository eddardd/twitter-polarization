{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","components/HierarchicalEdge/index.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","HierarchicalEdge","id","node","parent","data","name","useEffect","colorin","colorout","orientationTypeScale","d3","domain","range","root","delimiter","map","Map","forEach","find","has","get","lastIndexOf","set","substring","children","push","hierarchy","mydata","line","curve","beta","radius","d","y","angle","x","width","size","Math","PI","tree","leaves","incoming","outgoing","imports","bilink","sort","a","b","height","svg","attr","append","selectAll","join","text","each","this","on","event","link","style","path","raise","call","flatMap","leaf"],"mappings":"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","file":"static/js/11.4bbeaafd.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nimport mydata from '../../assets/hierarchical_graph.json';\n\nfunction HierarchicalEdge() {\n  function id(node) {\n    return `${node.parent ? id(node.parent) + '.' : ''}${node.data.name}`;\n  }\n\n  function hierarchy(data, delimiter = '.') {\n    let root;\n    const map = new Map();\n    data.forEach(function find(data) {\n      const { name } = data;\n      if (map.has(name)) return map.get(name);\n      const i = name.lastIndexOf(delimiter);\n      map.set(name, data);\n      if (i >= 0) {\n        find({ name: name.substring(0, i), children: [] }).children.push(data);\n        data.name = name.substring(i + 1);\n      } else {\n        root = data;\n      }\n      return data;\n    });\n    return root;\n  }\n\n  useEffect(() => {\n    const colorin = '#00f';\n    const colornone = '#ccc';\n    const colorout = '#f00';\n    const orientationTypeScale = d3\n      .scaleOrdinal()\n      .domain(['Esquerda', 'Direita', 'Centro'])\n      .range(['#941c1c', '#1a219c', '#9c8e19']);\n\n    const data = hierarchy(mydata);\n\n    const line = d3\n      .lineRadial()\n      .curve(d3.curveBundle.beta(0.85))\n      .radius((d) => d.y)\n      .angle((d) => d.x);\n\n    const width = 954;\n    const radius = width / 2;\n    const tree = d3.cluster().size([2 * Math.PI, radius - 100]);\n\n    function bilink(root) {\n      const map = new Map(root.leaves().map((d) => [id(d), d]));\n      for (const d of root.leaves())\n        (d.incoming = []),\n          (d.outgoing = d.data.imports.map((i) => [d, map.get(i)]));\n      for (const d of root.leaves())\n        for (const o of d.outgoing) o[1].incoming.push(o);\n      return root;\n    }\n\n    const root = tree(\n      bilink(\n        d3\n          .hierarchy(data)\n          .sort(\n            (a, b) =>\n              d3.ascending(a.height, b.height) ||\n              d3.ascending(a.data.name, b.data.name),\n          ),\n      ),\n    );\n\n    const svg = d3\n      .select('#hierarchical')\n      .attr('viewBox', [-width / 2, -width / 2, width, width]);\n\n    function overed(event, d) {\n      link.style('mix-blend-mode', null);\n      d3.select(this).attr('font-weight', 'bold');\n      d3.selectAll(event.incoming.map((d) => d.path))\n        .attr('stroke', colorin)\n        .raise();\n      d3.selectAll(event.incoming.map(([d]) => d.text))\n        .attr('fill', colorin)\n        .attr('font-weight', 'bold');\n      d3.selectAll(event.outgoing.map((d) => d.path))\n        .attr('stroke', colorout)\n        .raise();\n      d3.selectAll(event.outgoing.map(([, d]) => d.text))\n        .attr('fill', colorout)\n        .attr('font-weight', 'bold');\n    }\n\n    function outed(event, d) {\n      link.style('mix-blend-mode', 'multiply');\n      d3.select(this).attr('font-weight', null);\n      d3.selectAll(event.incoming.map((d) => d.path)).attr('stroke', null);\n      d3.selectAll(event.incoming.map(([d]) => d.text))\n        .attr('fill', null)\n        .attr('font-weight', null);\n      d3.selectAll(event.outgoing.map((d) => d.path)).attr('stroke', null);\n      d3.selectAll(event.outgoing.map(([, d]) => d.text))\n        .attr('fill', null)\n        .attr('font-weight', null);\n    }\n\n    const node = svg\n      .append('g')\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', 10)\n      .selectAll('g')\n      .data(root.leaves())\n      .join('g')\n      .attr(\n        'transform',\n        (d) => `rotate(${(d.x * 180) / Math.PI - 90}) translate(${d.y},0)`,\n      )\n      .append('text')\n      .attr('dy', '0.31em')\n      .attr('x', (d) => (d.x < Math.PI ? 6 : -6))\n      .attr('text-anchor', (d) => (d.x < Math.PI ? 'start' : 'end'))\n      .attr('transform', (d) => (d.x >= Math.PI ? 'rotate(180)' : null))\n      .text((d) => d.data.name)\n      .attr('fill', (d) => orientationTypeScale(d.data['Orientação']))\n      .each(function (d) {\n        d.text = this;\n      })\n      .on('mouseover', overed)\n      .on('mouseout', outed)\n      .call((text) =>\n        text.append('title').text(\n          (d) => `${d.data.name}\n${d.outgoing.length} outgoing\n${d.incoming.length} incoming`,\n        ),\n      );\n\n    const link = svg\n      .append('g')\n      .attr('stroke', colornone)\n      .attr('fill', 'none')\n      .selectAll('path')\n      .data(root.leaves().flatMap((leaf) => leaf.outgoing))\n      .join('path')\n      .style('mix-blend-mode', 'multiply')\n      .attr('d', ([i, o]) => line(i.path(o)))\n      .each(function (d) {\n        d.path = this;\n      });\n  }, []);\n\n  return (\n    <>\n      <svg id=\"hierarchical\"></svg>\n    </>\n  );\n}\n\nexport default HierarchicalEdge;\n"],"sourceRoot":""}