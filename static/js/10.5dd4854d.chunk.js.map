{"version":3,"sources":["components/BarChart/style.js","components/BarChart/index.js"],"names":["Svg","styled","svg","H1","h1","BarChart","useAxios","data","loading","error","useEffect","d3","attr","nodes","links","circleScale","domain","d","degree","range","link","append","selectAll","enter","simulation","force","id","username","distance","strength","distanceMax","forceSimulation","on","source","x","y","target","node","orientationTypeScale","call","active","alphaTarget","restart","fx","fy","drag","text","className"],"mappings":"2LAEaA,EAAMC,IAAOC,IAAV,wIASHC,EAAKF,IAAOG,GAAV,mD,OC4HAC,UAhIf,WAAqB,IAAD,EAC0BC,YAC1C,oJAFgB,0BACTC,EADS,EACTA,KAAMC,EADG,EACHA,QAASC,EADN,EACMA,MAkHxB,OAnHkB,KAKlBC,qBAAU,WACR,IAAgB,IAAZF,EAAmB,CACrB,IAGMN,EAAMS,IACF,SACPC,KAAK,UAAW,EAAC,KAAY,IALlB,IACC,MAMTC,EAAQN,EAAKM,MACbC,EAAQP,EAAKO,MAgBnB,IAAMC,EAAcJ,MAEjBK,OAAOL,IAAUE,GAAO,SAACI,GAAD,OAAOA,EAAEC,WACjCC,MAAM,CAAC,EAAG,KAEPC,EAAOlB,EACVmB,OAAO,KACPC,UAAU,QACVf,KAAKO,GACLS,QACAF,OAAO,QACPT,KAAK,QAAS,QA0BjB,IAAMY,EAnDN,SAAyBX,EAAOC,GAC9B,OAAOH,IACYE,GAChBY,MACC,OACAd,IACaG,GACVY,IAAG,SAACT,GAAD,OAAOA,EAAEU,YACZC,SAAS,KAEbH,MAAM,SAAUd,MAAmBkB,UAAU,IAAIC,YAAY,MAC7DL,MAAM,SAAUd,OAwCFoB,CAAgBlB,EAAOC,GAAOkB,GAAG,QAiCpD,WAEEZ,EAAKR,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEgB,OAAOC,KAChCd,EAAKR,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEgB,OAAOE,KAChCf,EAAKR,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEmB,OAAOF,KAChCd,EAAKR,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEmB,OAAOD,KAGhCE,EAAKzB,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEiB,KACzBG,EAAKzB,KAAK,MAAM,SAACK,GAAD,OAAOA,EAAEkB,QAxCrBG,EAAuB3B,MAE1BK,OAAO,CAAC,WAAY,UAAW,WAC/BG,MAAM,CAAC,UAAW,UAAW,YAE1BkB,EAAOnC,EACVmB,OAAO,KACPC,UAAU,UACVf,KAAKM,GACLU,QACAF,OAAO,UACPT,KAAK,QAAS,QACdA,KAAK,KAAK,SAACK,GAAD,OAAOF,EAAYE,EAAEC,WAC/BqB,KAvCH,SAAcf,GAiBZ,OAAOb,MAEJqB,GAAG,SAlBN,SAAqBf,GACdN,IAAS6B,QAAQhB,EAAWiB,YAAY,IAAKC,UAClDzB,EAAE0B,GAAK1B,EAAEiB,EACTjB,EAAE2B,GAAK3B,EAAEkB,KAgBRH,GAAG,QAbN,SAAiBf,GACfA,EAAE0B,GAAKhC,IAASuB,EAChBjB,EAAE2B,GAAKjC,IAASwB,KAYfH,GAAG,OATN,SAAmBf,GACZN,IAAS6B,QAAQhB,EAAWiB,YAAY,GAC7CxB,EAAE0B,GAAK,KACP1B,EAAE2B,GAAK,QAwBHC,CAAKrB,IACVZ,KAAK,QAAQ,SAACK,GAAD,OAAOqB,EAAqBrB,EAAE,wBAE9CoB,EACGhB,OAAO,SACPyB,MACC,SAAC7B,GAAD,MACE,aACAA,EAAEU,SADF,sBAIAV,EAAEC,OAJF,4BAOAD,EAAE,0BAgBT,CAACT,IAEAA,EAAgB,2CAChBC,EAAc,uCAGhB,eAAC,IAAD,WACE,cAACN,EAAD,yDACA,qBAAK4C,UAAU,WAAf,SACE,cAAC/C,EAAD,CAAK0B,GAAG","file":"static/js/10.5dd4854d.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const Svg = styled.svg`\n  line.link {\n    fill: none;\n    stroke: #ddd;\n    stroke-opacity: 0.8;\n    stroke-width: 1.5px;\n  }\n`;\n\nexport const H1 = styled.h1`\n  text-align: center;\n`;\n","import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport useAxios from 'axios-hooks';\nimport Zoom from 'react-reveal/Zoom';\n\nimport { Svg, H1 } from './style';\n\nfunction BarChart() {\n  const [{ data, loading, error }, refetch] = useAxios(\n    'https://gist.githubusercontent.com/dhannyell/b405174707a39252af5cc8981aec3aee/raw/be0c5c0fcfc790c50ba82b74cfcfe017d8b2d41a/standard_graph@1.json',\n  );\n\n  useEffect(() => {\n    if (loading === false) {\n      const width = 960;\n      const height = 1000;\n\n      const svg = d3\n        .select('#area')\n        .attr('viewBox', [-width / 2, -height / 2, width, height]);\n\n      const nodes = data.nodes;\n      const links = data.links;\n\n      function forceSimulation(nodes, links) {\n        return d3\n          .forceSimulation(nodes)\n          .force(\n            'link',\n            d3\n              .forceLink(links)\n              .id((d) => d.username)\n              .distance(50),\n          )\n          .force('charge', d3.forceManyBody().strength(-50).distanceMax(270))\n          .force('center', d3.forceCenter());\n      }\n\n      const circleScale = d3\n        .scaleSqrt()\n        .domain(d3.extent(nodes, (d) => d.degree))\n        .range([2, 20]);\n\n      const link = svg\n        .append('g')\n        .selectAll('line')\n        .data(links)\n        .enter()\n        .append('line')\n        .attr('class', 'link');\n\n      function drag(simulation) {\n        function dragstarted(d) {\n          if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n          d.fx = d.x;\n          d.fy = d.y;\n        }\n\n        function dragged(d) {\n          d.fx = d3.event.x;\n          d.fy = d3.event.y;\n        }\n\n        function dragended(d) {\n          if (!d3.event.active) simulation.alphaTarget(0);\n          d.fx = null;\n          d.fy = null;\n        }\n        return d3\n          .drag()\n          .on('start', dragstarted)\n          .on('drag', dragged)\n          .on('end', dragended);\n      }\n\n      const simulation = forceSimulation(nodes, links).on('tick', ticked);\n\n      const orientationTypeScale = d3\n        .scaleOrdinal()\n        .domain(['Esquerda', 'Direita', 'Centro'])\n        .range(['#941c1c', '#1a219c', '#9c8e19']);\n\n      const node = svg\n        .append('g')\n        .selectAll('circle')\n        .data(nodes)\n        .enter()\n        .append('circle')\n        .attr('class', 'node')\n        .attr('r', (d) => circleScale(d.degree))\n        .call(drag(simulation))\n        .attr('fill', (d) => orientationTypeScale(d['Orientação']));\n\n      node\n        .append('title')\n        .text(\n          (d) =>\n            'Username: ' +\n            d.username +\n            '\\n' +\n            'Times Retweeted: ' +\n            d.degree +\n            '\\n' +\n            'Political Orientation: ' +\n            d['Orientação'],\n        );\n\n      // Defina a função ticked\n      function ticked() {\n        // Reposicionando arestas\n        link.attr('x1', (d) => d.source.x);\n        link.attr('y1', (d) => d.source.y);\n        link.attr('x2', (d) => d.target.x);\n        link.attr('y2', (d) => d.target.y);\n\n        // Reposicionando nós\n        node.attr('cx', (d) => d.x);\n        node.attr('cy', (d) => d.y);\n      }\n    }\n  }, [loading]);\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>Error!</p>;\n\n  return (\n    <Zoom>\n      <H1>Grafo de Retweets - Política Brasileira</H1>\n      <div className=\"barChart\">\n        <Svg id=\"area\"></Svg>\n      </div>\n    </Zoom>\n  );\n}\n\nexport default BarChart;\n"],"sourceRoot":""}